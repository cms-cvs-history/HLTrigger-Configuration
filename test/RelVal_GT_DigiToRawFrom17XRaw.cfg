process Raw2 = {

      untracked PSet configurationMetadata = {
      untracked string version = "$Revision: 1.18 $"
      untracked string name = "$Source: /local/projects/CMSSW/rep/CMSSW/HLTrigger/Configuration/test/RelVal_GT_DigiToRawFrom17XRaw.cfg,v $"
      untracked string annotation = "Standard CFG to do (re-do) L1+ digi2raw"
 }

// Message Logger
include "FWCore/MessageLogger/data/MessageLogger.cfi"

// Source of events
untracked PSet maxEvents = {untracked int32 input = 1}

source = PoolSource {
	untracked vstring fileNames = {
#	 '/store/relval/2008/1/31/RelVal-RelValQCD_Pt_120_170-1196786595-HLT/0001/00450F49-22D0-DC11-8317-001617E30F56.root'
	'/store/CSA07/2007/12/15/L1Trig-MinBias-A4/0002/00026980-3FAB-DC11-A34C-000423D944A4.root'
  }
}

// Conditions data
// Digi to raw: Conditions should be included through StandardSequences
// include "Configuration/StandardSequences/data/FakeConditions.cff"
include "Configuration/StandardSequences/data/FrontierConditions.cff"
// work-around needed - otherwise complaints about  CSCGeometryESModule...
include "Configuration/StandardSequences/data/Reconstruction.cff"

//unpack GCT and GMT and re-run GT
include "L1Trigger/Configuration/data/L1HltSeed.cff"

// Re-make RAW
include "HLTrigger/Configuration/data/rawToDigi/DigiToRaw.cff"
replace rawDataCollector.currentProcessOnly = true

path p = { l1GmtEmulDigis, l1GctEmulDigis, l1GtEmulDigis,  DigiToRaw }

include "Configuration/EventContent/data/EventContent.cff"

module FEVT = PoolOutputModule {
    using FEVTSIMEventContent	
    untracked string fileName='file:RelVal_Raw.root'
    untracked int32 basketSize = 4096
      untracked PSet dataset ={      
        untracked string dataTier = "RAW"
      }
}

//drop 1_7_X old RAW
replace FEVT.outputCommands += "drop FEDRawDataCollection_*_*_*"
replace FEVT.outputCommands += "keep FEDRawDataCollection_rawDataCollector_*_Raw2"

//drop old 1_7_X HLT RelVal products
replace FEVT.outputCommands += "drop *_*_*_HLT"

endpath e = {FEVT}

}
