process HLT = 
{
  untracked PSet maxEvents = {untracked int32 input = 2}

  include "Configuration/StandardSequences/data/Services.cff"
  // include "Configuration/StandardSequences/data/FakeConditions.cff"
  include "Configuration/StandardSequences/data/FrontierConditions_GlobalTag.cff"
  // https://twiki.cern.ch/twiki/bin/view/CMS/SWGuideFrontierConditions
  replace GlobalTag.globaltag = "STARTUP::All"

  include "FWCore/MessageService/data/MessageLogger.cfi"
    
  untracked PSet options = 
  {
    include "FWCore/Framework/test/cmsExceptionsFatalOption.cff"
    untracked bool wantSummary = true
  }

  include "Configuration/Generator/data/PythiaUESettings.cfi"
  source = PythiaSource 
  {
    untracked int32 pythiaPylistVerbosity = 0
    untracked bool pythiaHepMCVerbosity   = false
    untracked int32 maxEventsToPrint      = 0  
    untracked double filterEfficiency     = 1.

    PSet PythiaParameters = 
    {
      using pythiaUESettingsBlock

      # This is a vector of ParameterSet names to be read, in this order
      vstring parameterSets = 
      {
        "pythiaUESettings",
        "processParameters"
      }

      vstring processParameters = 
      {
        'MSEL      = 0     ! User defined processes',
        'MSUB(81)  = 1     ! qqbar to QQbar',
        'MSUB(82)  = 1     ! gg to QQbar',
        'MSTP(7)   = 6     ! flavour = top',
        'PMAS(6,1) = 175.  ! top quark mass'
      }
    }
  }

  include "Configuration/StandardSequences/data/VtxSmearedEarly10TeVCollision.cff"
  include "Configuration/StandardSequences/data/Generator.cff"
  include "Configuration/StandardSequences/data/Simulation.cff"
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff" 
  include "Configuration/StandardSequences/data/Geometry.cff"
  include "Configuration/StandardSequences/data/MagneticField.cff"
  include "Configuration/StandardSequences/data/L1Emulator.cff"

  # Choose a menu/prescale/mask from one of the .cffs
  # in L1TriggerConfig/L1GtConfigProducers/data/Luminosity
  include "L1TriggerConfig/L1GtConfigProducers/data/Luminosity/lumi1030/L1Menu2008_2E30_Unprescaled.cff"
  include "Configuration/StandardSequences/data/DigiToRaw.cff"
  # run GEN-RAW
  #
  // ensure that the GEN-RAW path does not accept any events
  module pBool = hltBool from "HLTrigger/HLTfilters/data/hltBool.cfi"
  replace pBool.result=false
  path GenSimDigiL1Raw = {pgen & psim & pdigi & L1Emulator & DigiToRaw & pBool}
  # run HLT
  include "HLTrigger/Configuration/data/HLT_2E30.cff"

  include "Configuration/EventContent/data/EventContent.cff"
  module FEVT = PoolOutputModule 
  { 
    using FEVTDEGUBHLTEventContent
    untracked string fileName = "TTbarGenHLT.root"
    untracked int32 basketSize = 4096
    untracked PSet dataset =
    {	
      untracked string dataTier = "RAW"
    }
  }

  endpath outpath = {FEVT}

}
